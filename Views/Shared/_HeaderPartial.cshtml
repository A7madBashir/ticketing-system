@using Microsoft.AspNetCore.Identity
@inject SignInManager<TicketingSystem.Models.Identity.User> SignInManager

<div id="kt_header" class="header align-items-stretch">
    <div class="container-fluid d-flex align-items-stretch justify-content-between">
        <div class="d-flex align-items-center">
            <a href="/" class="text-dark text-hover-primary fs-4">
                Ticketing System
            </a>
        </div>
        <div class="d-flex align-items-stretch justify-content-end flex-lg-grow-1">
            <div class="d-flex align-items-stretch" id="kt_header_nav">

                @if (SignInManager.IsSignedIn(User))
                {
                    <div class="d-flex align-items-stretch me-0 m-auto">
                        <div class="btn btn-icon-dark btn-active-light-primary position-relative ps-4 pe-4"
                             data-kt-menu-trigger="click"
                             data-kt-menu-attach="parent"
                             data-kt-menu-placement="bottom-end">
                            <div class="d-flex flex-column align-items-end">
                                <span class="text-dark fw-bolder fs-7 d-none d-md-inline">@User.Identity.Name</span>
                            </div>
                            <div class="symbol symbol-35px symbol-circle ms-3 d-none">
                                <i class="fa-solid fa-circle-user fa-2x text-primary"></i> @* Font Awesome User Icon for Avatar *@
                                @* If you prefer a temporary image: <img alt="Pic" src="/metronic/assets/media/avatars/300-1.jpg" /> *@
                            </div>
                        </div>
                        <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 w-275px" data-kt-menu="true">
                            <div class="menu-item px-3">
                                <div class="menu-content d-flex align-items-center px-3">
                                    <div class="symbol symbol-50px me-2">
                                        <i class="fa-solid fa-circle-user fa-3x text-gray-700"></i> @* Font Awesome User Icon for Avatar *@
                                        @* If you prefer a temporary image: <img alt="User Avatar" src="/metronic/assets/media/avatars/300-1.jpg" /> *@
                                    </div>
                                    <div class="d-flex flex-column">
                                        <div class="fw-bold d-flex align-items-center fs-5">
                                            @User.Identity.Name
                                        </div>
                                        <a href="#" class="fw-semibold text-muted text-hover-primary fs-7">@User.Identity.Name</a>
                                    </div>
                                </div>
                            </div>
                            <div class="separator my-2"></div>
                            <div class="menu-item px-3">
                                <a asp-area="Identity" asp-page="/Account/Manage/Index" class="menu-link px-3">
                                    <span class="menu-icon">
                                        <i class="fa-solid fa-gear fs-4"></i>
                                    </span>
                                    <span class="menu-title">Manage Account</span>
                                </a>
                            </div>
                            <div class="separator my-2"></div>
                            <div class="menu-item px-3">
                                <form id="logoutForm" class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                    <button type="submit" class="menu-link px-3 btn btn-link text-decoration-none text-gray-800 fw-semibold text-hover-primary w-100 text-start border-0 bg-transparent">
                                        <span class="menu-icon">
                                            <i class="fa-solid fa-right-from-bracket fs-4"></i>
                                        </span>
                                        <span class="menu-title">Logout</span>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="d-flex align-items-center">
                        <a href="/Identity/Account/Login" class="btn btn-primary me-2">
                             <i class="fa-solid fa-right-to-bracket me-2"></i>Login
                        </a>
                        @* <a href="/Identity/Account/Register" class="btn btn-light">
                             <i class="fa-solid fa-user-plus me-2"></i>Register
                        </a> *@
                    </div>
                }

            </div>
        </div>
    </div>
</div>